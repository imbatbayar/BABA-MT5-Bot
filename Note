# BABA MT5 Bot ‚Äî NOTES

–≠–Ω—ç —Ñ–∞–π–ª –Ω—å EA —Ö”©–≥–∂“Ø“Ø–ª—ç–ª—Ç–∏–π–Ω —è–≤—Ü—ã–≥ (V1 ‚Üí V6) —Ç–æ–π–º–ª–æ–Ω —Ç—ç–º–¥—ç–≥–ª—ç—Å—ç–Ω Timeline Log + –¥–∞—Ä–∞–∞–≥–∏–π–Ω —à–∞—Ç–∞–Ω–¥ –∞—à–∏–≥–ª–∞—Ö –®–∞—Ä —Ç—ç–º–¥—ç–≥–ª—ç–ª —é–º.  

---

## üìú Timeline Log

### V1 ‚Äî Kick-off Skeleton
- üéØ –≠—Ö–ª—ç–ª: EA framework (SL/TP, equity info).
- üöß –ê–ª–¥–∞–∞: Strategy logic –±–∞—Ä–∞–≥ –±–∞–π–≥–∞–∞–≥“Ø–π.
- ‚úÖ –°—É—Ä–≥–∞–º–∂: Framework —Å—É—É—Ä—å –±—ç–ª—ç–Ω –±–æ–ª—Å–æ–Ω.

### V2 ‚Äî RiskGuard —Å—É—É—Ä—å
- üéØ –ù—ç–º—Å—ç–Ω: Day loss cap, max exposure, 1%/trade sizing.
- üöß –ê–ª–¥–∞–∞: Logic –±“Ø—Ä—ç–Ω –±—É—Å.
- ‚úÖ –°—É—Ä–≥–∞–º–∂: Risk management —á—É—Ö–∞–ª –≥—ç–¥—ç–≥ –Ω—å –±–∞—Ç–ª–∞–≥–¥—Å–∞–Ω.

### V3 ‚Äî EMA & Breakout Skeleton
- üéØ –ù—ç–º—Å—ç–Ω: H1 EMA200 bias, Donchian breakout core, partial TP + BE + ATR trail —ç—Ö–ª—ç–ª.
- üöß –ê–ª–¥–∞–∞: TimeDayOfWeek(), iVolume cast warning.
- ‚úÖ –°—É—Ä–≥–∞–º–∂: Trend-following bias –∞–∂–∏–ª–ª–∞–∂ —ç—Ö—ç–ª—Å—ç–Ω.

### V4 ‚Äî Aegis
- üéØ –ù—ç–º—Å—ç–Ω: RiskGuard v1 (day cap + time-stop), breakout confirm —Å–∞–π–∂—Ä—É—É–ª–∞–ª—Ç.
- üöß –ê–ª–¥–∞–∞: –•—ç—Ç –æ–ª–æ–Ω false breakout.
- ‚úÖ –°—É—Ä–≥–∞–º–∂: RiskGuard —Å—É—É–∂ ”©–≥—Å”©–Ω.

### V4.1 ‚Äî TrendRide
- üéØ –ù—ç–º—Å—ç–Ω: EMA pullback logic (multi-TF confirm).
- üöß –ê–ª–¥–∞–∞: –ó–∞—Ä–∏–º –±–æ–ª–æ–º–∂ –∞–ª–¥—Å–∞–Ω.
- ‚úÖ –°—É—Ä–≥–∞–º–∂: EMA bias —Ö“Ø—á—Ç—ç–π filter –±–æ–ª–æ–≤—á —Ö—ç—Ç —á–∞–Ω–≥–∞ –±–∞–π–∂ –±–æ–ª–Ω–æ.

### V5 ‚Äî PatternAware
- üéØ –ù—ç–º—Å—ç–Ω:
  - Mode (Auto / Range / Trend).
  - Fake breakout 2/3 —à–∞–ª–≥–∞–ª—Ç (wick/body/volume z-score).
  - Counter-Scalp Guard.
- üöß –ê–ª–¥–∞–∞: Compile error (–∂–∏—à—ç—ç: line 297).
- ‚úÖ –°—É—Ä–≥–∞–º–∂: Pattern-aware –ª–æ–≥–∏–∫ –Ω—ç–º—ç–≥–¥—Å—ç–Ω.

### V6 ‚Äî StateMachine (Balanced Preset 1%)
- üéØ –ù—ç–º—Å—ç–Ω:
  - Mode=Auto, CounterScalpGuard=ON.
  - Cooldown (loss –¥–∞—Ä–∞–∞—Ö –∞–º—Ä–∞–ª—Ç).
  - Day limits & Session filter.
  - Balanced Preset: 1%/trade, RR‚â•2, Partial TP+BE, ATR trail.
- üöß Critical bug:
  - Cooldown logic ‚Üí `iBarShift(TimeCurrent)` “Ø—Ä–≥—ç–ª–∂ 0 ‚Üí cooldown “Ø—Ä–≥—ç–ª–∂ ON –±–æ–ª—Å–æ–Ω.
- ‚úÖ –ó–∞—Å–≤–∞—Ä:
  - `lastExitBarIndex` + `BarsTF()` –∞—à–∏–≥–ª–∞–∂ –∑”©–≤ –∏–Ω–¥–µ–∫—Å —Ç–æ–æ—Ü—Å–æ–Ω.
- üìå –ù—ç–º—ç–ª—Ç –∑”©–≤–ª”©–º–∂:
  - InpMaxTradesPerDay = 6‚Äì8
  - SeasonWeight = 0.85‚Äì0.90
  - ConfirmBars = 1 (thin market “Ø–µ–¥)

---

## üü® –®–∞—Ä —Ç—ç–º–¥—ç–≥–ª—ç–ª (–¥–∞—Ä–∞–∞–≥–∏–π–Ω —à–∞—Ç–∞–Ω–¥ —Ö—ç—Ä—ç–≥–ª—ç—Ö)

- **Preset**: Balanced 1%  
  - Mode=Auto  
  - CounterScalpGuard=ON  
  - Cooldown=5 bars  
  - DayLossCap=2%  
  - RR ‚â• 2  
  - Partial 50%@1R ‚Üí BE ‚Üí ATR trail  

- **Critical bug**: Cooldown –±–∞—Ä—ã–Ω –∏–Ω–¥–µ–∫—Å ‚Üí FIXED (`lastExitBarIndex`, `BarsTF`).  

- **Metrics –∑–æ—Ä–∏–ª–≥–æ**:  
  - PF ‚â• 1.5  
  - MaxDD ‚â§ 15%  
  - Win ‚âà 50‚Äì55%  
  - AvgR ‚âà 1.8‚Äì2.0  

- **Test protocol**:  
  - Visual (M5/M15) 6‚Äì12 —Å–∞—Ä  
  - Demo forward 1‚Äì2 –¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥  

- **Adjustable knobs**:  
  - DonchLookback  
  - ATR_Mult  
  - ATR_Trail_Mult  
  - ConfirmBars  
  - MinTouches  

---
